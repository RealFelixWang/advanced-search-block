(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React;var a=e.n(t);const n=window.wp.apiFetch;var r=e.n(n);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,c,s=[],l=!0,i=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{if(!l&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const l=function(e){var n=e.keyword,r=e.categoryId,l=e.tagIds,i=(e.page,e.categories),u=e.tags,m=e.onSearch,p=e.showTags,d=(e.showPagination,o((0,t.useState)(n),2)),g=d[0],f=d[1],h=o((0,t.useState)(r),2),b=h[0],v=h[1],y=o((0,t.useState)(l),2),w=y[0],E=y[1];(0,t.useEffect)(function(){f(n)},[n]),(0,t.useEffect)(function(){v(r)},[r]),(0,t.useEffect)(function(){E(l)},[l]);return a().createElement("div",{className:"asb-search-form"},a().createElement("form",{onSubmit:function(e){e.preventDefault(),m({q:g,cat:b,tags:w,page:1})},className:"asb-form"},a().createElement("div",{className:"asb-form-group"},a().createElement("label",{htmlFor:"asb-keyword",className:"asb-label"},"Keyword"),a().createElement("div",{className:"asb-input-wrapper"},a().createElement("input",{type:"text",id:"asb-keyword",className:"asb-input",placeholder:"Search posts...",value:g,onChange:function(e){var t=e.target.value;f(t)}}),a().createElement("button",{type:"submit",className:"asb-search-button"},a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a().createElement("circle",{cx:"11",cy:"11",r:"8"}),a().createElement("path",{d:"m21 21-4.35-4.35"})),a().createElement("span",null,"Search")))),a().createElement("div",{className:"asb-form-group"},a().createElement("label",{htmlFor:"asb-category",className:"asb-label"},"Category"),a().createElement("select",{id:"asb-category",className:"asb-select",value:b,onChange:function(e){var t=parseInt(e.target.value,10);v(t),m({q:g,cat:t,tags:w,page:1})}},a().createElement("option",{value:"0"},"All Categories"),i.map(function(e){return a().createElement("option",{key:e.id,value:e.id},e.name," (",e.count||0,")")}))),p&&u.length>0&&a().createElement("div",{className:"asb-form-group"},a().createElement("label",{className:"asb-label"},"Tags"),a().createElement("div",{className:"asb-tags-grid"},u.map(function(e){return a().createElement("label",{key:e.id,className:"asb-tag-checkbox"},a().createElement("input",{type:"checkbox",checked:w.includes(e.id),onChange:function(t){return n=e.id,r=t.target.checked?[].concat(function(e){if(Array.isArray(e))return s(e)}(a=w)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||c(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]):w.filter(function(e){return e!==n}),E(r),void m({q:g,cat:b,tags:r,page:1});var a,n,r}}),a().createElement("span",null,e.name),a().createElement("span",{className:"asb-tag-count"},"(",e.count||0,")"))}))),(g||b>0||w.length>0)&&a().createElement("div",{className:"asb-form-actions"},a().createElement("button",{type:"button",className:"asb-clear-button",onClick:function(){f(""),v(0),E([]),m({q:"",cat:0,tags:[],page:1})}},"Clear All Filters"))))},i=function(e){var t=e.posts,n=e.total,r=e.pages,o=e.currentPage,c=e.loading,s=e.onPageChange,l=e.showPagination;return c?a().createElement("div",{className:"asb-loading"},a().createElement("div",{className:"asb-spinner"}),a().createElement("p",null,"Loading results...")):c||0!==t.length?a().createElement("div",{className:"asb-results"},a().createElement("div",{className:"asb-results-header"},a().createElement("p",{className:"asb-results-count"},"Found ",a().createElement("strong",null,n)," ",1===n?"result":"results")),a().createElement("div",{className:"asb-posts-grid"},t.map(function(e){return a().createElement("article",{key:e.id,className:"asb-post-card"},e.featured_image&&a().createElement("div",{className:"asb-post-image"},a().createElement("img",{src:e.featured_image,alt:e.title})),a().createElement("div",{className:"asb-post-content"},e.categories.length>0&&a().createElement("div",{className:"asb-post-categories"},e.categories.map(function(e){return a().createElement("span",{key:e.id,className:"asb-category-badge"},e.name)})),a().createElement("h2",{className:"asb-post-title"},a().createElement("a",{href:e.link},e.title)),a().createElement("div",{className:"asb-post-meta"},a().createElement("span",{className:"asb-post-author"},"By ",e.author),a().createElement("span",{className:"asb-post-date"},(t=e.date,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))),a().createElement("div",{className:"asb-post-excerpt",dangerouslySetInnerHTML:{__html:e.excerpt}}),e.tags.length>0&&a().createElement("div",{className:"asb-post-tags"},e.tags.map(function(e){return a().createElement("span",{key:e.id,className:"asb-tag-badge"},"#",e.name)})),a().createElement("a",{href:e.link,className:"asb-read-more"},"Read More â†’")));var t})),l&&r>1&&a().createElement("div",{className:"asb-pagination"},a().createElement("button",{className:"asb-page-button asb-page-prev",onClick:function(){return s(o-1)},disabled:1===o,"aria-label":"Previous page"},a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a().createElement("polyline",{points:"15 18 9 12 15 6"})),"Previous"),a().createElement("div",{className:"asb-page-numbers"},function(){for(var e=[],t=1;t<=r;t++)1===t||t===r||t>=o-2&&t<=o+2?e.push(t):"..."!==e[e.length-1]&&e.push("...");return e}().map(function(e,t){return a().createElement(a().Fragment,{key:t},"..."===e?a().createElement("span",{className:"asb-page-ellipsis"},"..."):a().createElement("button",{className:"asb-page-number ".concat(e===o?"active":""),onClick:function(){return s(e)},"aria-label":"Page ".concat(e),"aria-current":e===o?"page":void 0},e))})),a().createElement("button",{className:"asb-page-button asb-page-next",onClick:function(){return s(o+1)},disabled:o===r,"aria-label":"Next page"},"Next",a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a().createElement("polyline",{points:"9 18 15 12 9 6"}))))):a().createElement("div",{className:"asb-no-results"},a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a().createElement("circle",{cx:"11",cy:"11",r:"8"}),a().createElement("path",{d:"m21 21-4.35-4.35"}),a().createElement("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),a().createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"})),a().createElement("h3",null,"No posts found"),a().createElement("p",null,"Try adjusting your search filters or search terms"))};function u(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function o(a,n,r,o){var l=n&&n.prototype instanceof s?n:s,i=Object.create(l.prototype);return m(i,"_invoke",function(a,n,r){var o,s,l,i=0,u=r||[],m=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,a){return o=t,s=0,l=e,p.n=a,c}};function d(a,n){for(s=a,l=n,t=0;!m&&i&&!r&&t<u.length;t++){var r,o=u[t],d=p.p,g=o[2];a>3?(r=g===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=d&&((r=a<2&&d<o[1])?(s=0,p.v=n,p.n=o[1]):d<g&&(r=a<3||o[0]>n||n>g)&&(o[4]=a,o[5]=n,p.n=g,s=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,g){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&d(u,g),s=u,l=g;(t=s<2?e:l)||!m;){o||(s?s<3?(s>1&&(p.n=-1),d(s,l)):p.n=l:p.v=l);try{if(i=2,o){if(s||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),s=1);o=e}else if((t=(m=p.n<0)?l:a.call(n,p))!==c)break}catch(t){o=e,s=1,l=t}finally{i=1}}return{value:t,done:m}}}(a,r,o),!0),i}var c={};function s(){}function l(){}function i(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(m(t={},n,function(){return this}),t),d=i.prototype=s.prototype=Object.create(p);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,m(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=i,m(d,"constructor",i),m(i,"constructor",l),l.displayName="GeneratorFunction",m(i,r,"GeneratorFunction"),m(d),m(d,r,"Generator"),m(d,n,function(){return this}),m(d,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:g}})()}function m(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}m=function(e,t,a,n){function o(t,a){m(e,t,function(e){return this._invoke(t,a,e)})}t?r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a:(o("next",0),o("throw",1),o("return",2))},m(e,t,a,n)}function p(e,t,a,n,r,o,c){try{var s=e[o](c),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function d(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function c(e){p(o,n,r,c,s,"next",e)}function s(e){p(o,n,r,c,s,"throw",e)}c(void 0)})}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,c,s=[],l=!0,i=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{if(!l&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var h=function(e){var n=e.attributes,o=g((0,t.useState)(""),2),c=o[0],s=o[1],m=g((0,t.useState)(0),2),p=m[0],f=m[1],h=g((0,t.useState)([]),2),b=h[0],v=h[1],y=g((0,t.useState)(1),2),w=y[0],E=y[1],S=g((0,t.useState)([]),2),k=S[0],N=S[1],P=g((0,t.useState)([]),2),A=P[0],x=P[1],j=g((0,t.useState)([]),2),O=j[0],C=j[1],I=g((0,t.useState)(0),2),L=I[0],q=I[1],T=g((0,t.useState)(0),2),B=T[0],_=T[1],F=g((0,t.useState)(!1),2),R=F[0],M=F[1],U=g((0,t.useState)(!0),2),G=U[0],D=U[1];(0,t.useEffect)(function(){var e=new URLSearchParams(window.location.search),t=e.get("q")||"",a=parseInt(e.get("cat")||"0",10),n=e.getAll("tags[]").map(function(e){return parseInt(e,10)}),r=parseInt(e.get("page")||"1",10);s(t),f(a),v(n),E(r),W(),z(),$({q:t,cat:a,tags:n,page:r})},[]);var W=function(){var e=d(u().m(function e(){var t,a;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r()({path:"/advanced-search/v1/categories"});case 1:t=e.v,N(t),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error loading categories:",a);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=d(u().m(function e(){var t,a;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r()({path:"/advanced-search/v1/tags"});case 1:t=e.v,x(t),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error loading tags:",a);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=d(u().m(function e(t){var a,o,c,l;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return M(!0),s(t.q),f(t.cat),v(t.tags),E(t.page),H(t),e.p=1,a=new URLSearchParams,t.q&&a.append("q",t.q),t.cat>0&&a.append("cat",t.cat.toString()),t.tags.forEach(function(e){return a.append("tags[]",e.toString())}),a.append("page",t.page.toString()),a.append("per_page",n.postsPerPage.toString()),e.n=2,r()({path:"/advanced-search/v1/search?".concat(a.toString())});case 2:o=e.v,C(o.posts),q(o.total),_(o.pages),G||t.page===w||(c=document.querySelector(".advanced-search-block"))&&c.scrollIntoView({behavior:"smooth",block:"start"}),G&&D(!1),e.n=4;break;case 3:e.p=3,l=e.v,console.error("Error performing search:",l),C([]),q(0),_(0);case 4:return e.p=4,M(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(_x){return e.apply(this,arguments)}}(),H=function(e){var t=new URL(window.location.href),a=new URLSearchParams;e.q&&a.set("q",e.q),e.cat>0&&a.set("cat",e.cat.toString()),e.tags.forEach(function(e){return a.append("tags[]",e.toString())}),e.page>1&&a.set("page",e.page.toString()),t.search=a.toString(),window.history.pushState({},"",t.toString())};return a().createElement("div",{className:"asb-app"},a().createElement(l,{keyword:c,categoryId:p,tagIds:b,page:w,categories:k,tags:A,onSearch:function(e){$(e)},showTags:n.showTags,showPagination:n.showPagination}),a().createElement(i,{posts:O,total:L,pages:B,currentPage:w,loading:R,onPageChange:function(e){$({q:c,cat:p,tags:b,page:e})},showPagination:n.showPagination}))};document.addEventListener("DOMContentLoaded",function(){console.log("Advanced Search Block: DOM content loaded");var e=document.querySelectorAll(".advanced-search-block");console.log("Advanced Search Block: Found ".concat(e.length," block instances")),e.forEach(function(e){var t=e.getAttribute("data-attributes"),a=t?JSON.parse(t):{showTags:!0,showPagination:!0,postsPerPage:10};if(console.log("Advanced Search Block: Block attributes",a),window.wp&&window.wp.element){if(!window.wp.element.createRoot)return console.error("Advanced Search Block: createRoot not available in wp.element"),void console.log("Available wp.element methods:",Object.keys(window.wp.element));try{(0,window.wp.element.createRoot)(e).render(window.wp.element.createElement(h,{attributes:a})),console.log("Advanced Search Block: Block initialized successfully")}catch(e){console.error("Advanced Search Block: Error initializing block",e)}}else console.error("Advanced Search Block: wp.element not available")})})})();